\documentclass[12pt]{article}
\usepackage[margin=2cm, a4paper]{geometry}
\usepackage{setspace}
\usepackage{float}
\usepackage{amsmath}
\usepackage{fancyvrb}
\usepackage{amssymb}
\usepackage{enumitem}

\usepackage{amsthm}
\usepackage[english]{babel}
\newtheorem{theorem}{Theorem}

\usepackage{xeCJK}
\setCJKmainfont{Noto Serif CJK TC}
\DeclareMathOperator{\lcm}{lcm}
\newcommand{\mytitle}{Abstract algebra I Homework 5}
\newcommand{\myauthor}{B13902022 賴昱錡}

% to fit the hw format
\renewcommand{\thesection}{\arabic{section})}
\renewcommand{\thesubsection}{(\alph{subsection})}

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{}
\fancyhead[L]{\mytitle}
\fancyhead[R]{\myauthor}

\title{\mytitle}
\author{\textbf{\myauthor}}
\date{}

\begin{document}

\onehalfspacing
\maketitle

% \noindent\rule{\textwidth}{1pt}
\section{}
\subsection{}
Suppose that for any two distinct elements $s,t\in S$, we have $O(s)\ne O(t)$ and $O(s)\cap O(t)\ne\emptyset$. There exists $g_1,g_2\in G$ such that $g_1s=g_2t\Rightarrow t=g_2^{-1}g_1s$, hence, for every $g\in G$, we have $gt=gg_2^{-1}g_1s\in O(s)$, i.e., there's always one corresponding element in $O(s)$ for every element in $O(t)$, similarity we have $gs=gg_1^{-1}g_2t\in O(t)$, so $O(s)=O(t)$, which contradicts our assumption. Thus $O(s)\ne O(t)$ \textbf{and} $O(s)\cap O(t)\ne\emptyset$ is impossible, we either have $O(s)=O(t)$ or $O(s)\cap O(t)=\emptyset$.
\subsection{}
$e\in G_s$ trivially, also for any $u,v\in G_s$, $(uv)s=us=s\Rightarrow (uv)\in G_s$, also $us=s,s=u^{-1}s\Rightarrow u^{-1}\in G_s$, thus $G_s$ is closed under taking products and inverses, $G_s\le G$.

Let the map be $\phi$, if $g_1G_s=g_2G_s$ and $g_1,g_2\in G$, then $g_2^{-1}g_1G_s=G_s\Rightarrow g_2^{-1}g_1\in G_s$. Hence, $g_2^{-1}g_1s=s, g_1s=g_2s, \phi(g_1G_s)=\phi(g_2G_s)$, we know $\phi$ is well-defined.

To prove the injectivity of $\phi$, if $g_1s=g_2s$ ($g_1,g_2\in G$), then $g_1^{-1}g_2s=s\Rightarrow g^{-1}g_2\in G_s$, so $g^{-1}g_2G_s=G_s$, we have $g_1G_s=g_2G_s$.

For every $u\in O(s)$, it can be written as the form: $u=gs$ for some $g\in G$, so $u=\phi(gG_s)$. $\phi$ is surjective. Since $\phi$ is both injective and surjective, $\phi$ is a well-defined bijection.
\subsection{}
By the result in $(b)$, we know $|G:G_s|=|G|/|G_s|=|O(s)|$, hence $|G_s||O(s)|=|G|$.

\section{}
\subsection{}
\subsection{}
\subsection{}

\section{}
\subsection{}
Note that $HK$ is the union of left cosets of $K$, namely, $HK=\bigcup_{h\in H}hK$. Suppose $h_1K=h_2K$, then $h_2^{-1}h_1K=K\Rightarrow h_2^{-1}h_1\in K\Rightarrow h_2^{-1}h_1\in H\cap K$. $H\cap K$ is trivially a subgroup of $H$, since for any $u,v\in H\cap K$, then $uv\in H$ and $uv\in K$, $u^{-1}\in H$ and $u^{-1}\in K$, we have $uv,u^{-1}\in H\cap K$, also $H\cap K$ contains the identity, thus $H\cap K\le H$.

Since $h_2^{-1}h_1\in H\cap K$ implies $h_1(H\cap K)=h_2(H\cap K)$, the number of left cosets of $K$ equals to the left cosets of $H\cap K$ in $H$. By Lagrange's Theorem, the number is $\frac{|H|}{|H\cap K|}$, also each left cosets of $K$ have the size of $|K|$. Hence, $|HK|=\frac{|H||K|}{|H\cap K|}$.
\subsection{}
If $G=HK$, then $|G|=|HK|=\frac{|H||K|}{|H\cap K|}$ by (a). We obtain that $[G:H\cup K]=\frac{|H||K|}{|H\cap K|^2}$ and $[G:H][G:K]=\frac{|G|^2}{|K||H|}=\frac{|H||K|}{|H\cap K|^2}$. Thus, $[G:H\cup K]=[G:H][G:K]$.

\textbf{not finish yet!!!}
\subsection{}
If $HK=KH$, every element $hk$ in $HK$ can be written as $k^{'}h^{'}$ for some $k,k^{'}\in K,h,h^{'}\in H$. Clearly, $HK$ contains $e$, the identity element in $G$. Suppose $u,v\in HK=KH$, $u=h_1k_1, v=k_2h_2$, $uv=h_1k_1k_2h_2$ ($h_1,h_2\in H$ and $k_1,k_2\in K$), let $k_1k_2=k_3\in K$, then $uv=h_1k_3h_2=h_1hk=h'k\in HK$ for some $h,h^{'}\in H, k\in K,hk=k_3h_2, h^{'}=h_1h$, thus $HK$ is closed under taking products. Also, $u^{-1}=k_1^{-1}h_1^{-1}$ and every element in $KH$ must can be written as $ab$ for some $,a\in H,b\in K$, since $k^{-1}\in K,h^{-1}\in H$, so $u^{-1}\in HK$, $HK$ is closed under taking inverse. In conclusion, $HK\le G$ if $HK=KH$.

Conversely, if $HK\le G$. Obviously, $K\in HK$ and $H\in HK$ by the closure property of subgroups, $KH\subseteq HK$. Suppose $hk\in HK$, since $HK$ is a subgroup of $G$, let $a=h_1k_1$ be its inverse, then $hk=(h_1k_1)^{-1}=k_1^{-1}h_1^{-1}\in KH$. Since $HK$ and $KH$ contains each other, we have $HK=KH$. So $HK$ is a subgroup of $G$ if and only if $HK=KH$.

% lack of -> proposition
\subsection{}

\section{}



\end{document}
